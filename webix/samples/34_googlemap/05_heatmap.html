<!doctype html>
<html>
<head>
    <link charset="utf-8" href="../../codebase/webix.css?v=7.0.1" rel="stylesheet" type="text/css">
    <script charset="utf-8" src="../../codebase/webix.js?v=7.0.1" type="text/javascript"></script>
    <title>GoogleMap::HeatMap</title>
</head>
<body>
<div id="sample_div" style='width:600px; height:300px; margin:50px;'></div>

<div style="margin:50px;">
    <input onClick="toggleHeatMap()" type="button" value="Show/hide Heatmap"/>
    <input onClick="updateHeatMap()" type="button" value="Change opacity and radius"/>
    <input onClick="addData()" type="button" value="Add data"/>
    <input onClick="updateData()" type="button" value="Update data"/>
    <input onClick="clearMap()" type="button" value="Clear map"/>
</div>

<script type="text/javascript">

    webix.ui({
        container: "sample_div",
        // provide your own Google API key
        // https://developers.google.com/maps/documentation/javascript/get-api-key
        key: "AIzaSyAi0oVNVO-e603aUY8SILdD4v9bVBkmiTg",
        view: "google-map",
        id: "map",
        zoom: 13,
        mapType: "SATELLITE",
        center: [37.774546, -122.433523],
        layerType: "heatmap",
        heatmapConfig: {
            opacity: "0.8",
            radius: "20"
        },
        url: "data/heatmap.json"
    });

    function toggleHeatMap() {
        var heatmap = $$("map").getHeatmap();
        if (heatmap)
            heatmap.setMap(heatmap.getMap() ? null : $$("map").getMap());
    }

    function updateHeatMap() {
        $$("map").define("heatmapConfig", {
            opacity: "0.6",
            radius: "10"
        });
        $$("map").refresh();
    }

    function addData() {
        $$("map").parse([
            {lat: 37.788, lng: -122.447},
            {lat: 37.788, lng: -122.445},
            {lat: 37.788, lng: -122.443},
            {lat: 37.788, lng: -122.441},
            {lat: 37.788, lng: -122.439},
            {lat: 37.788, lng: -122.437},
            {lat: 37.788, lng: -122.435}
        ]);
    }

    function updateData() {
        var item = $$("map").getItem($$("map").getFirstId());
        if (item)
            $$("map").updateItem(item.id, {weight: 3});
    }

    function clearMap() {
        $$("map").clearAll();
    }


</script>
</body>
</html>