<!DOCTYPE html>
<head>
    <title>Events</title>
    <link charset="utf-8" href="../../../codebase/webix.css?v=7.0.1" rel="stylesheet" type="text/css">
    <script charset="utf-8" src="../../../codebase/webix.js?v=7.0.1" type="text/javascript"></script>
</head>
<body>
<div id="testA" style='width:700px; height:500px;'></div>
<script charset="utf-8" type="text/javascript">
    function getCss(item) {
        var color = "",
            id = item.id,
            comments = item.comments;

        if (!this.isBranch(id)) {
            if (comments > 30)
                color = "#26a69a";
            else if (comments > 20)
                color = "#4db6ac";
            else if (comments > 10)
                color = "#80cbc4";
            else
                color = "#b2dfdb";
        }
        return {background: color};
    }

    webix.ready(function () {
        webix.ui({
            container: "testA",
            view: "treemap",
            value: "#views#",
            headerTemplate: "#category#",
            template: function (item) {
                return item.category || "";
            },
            type: {
                cssClass: getCss
            },
            on: {
                onItemClick: function (id) {
                    if (this.isBranch(id)) {
                        this.showBranch(id);
                    } else {
                        var item = this.getItem(id);
                        webix.message("Views: " + item.views + " <br/>Comments: " + item.comments);
                    }
                }
            },
            url: "data/data.json"
        });
    });
</script>
</body>
</html>