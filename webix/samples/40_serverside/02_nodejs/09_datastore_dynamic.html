<!DOCTYPE html>
<html>
<head>
    <title>Using DataStore</title>
    <link charset="utf-8" href="../../../codebase/webix.css?v=7.0.1" rel="stylesheet" type="text/css">
    <script charset="utf-8" src="../../../codebase/webix.js?v=7.0.1" type="text/javascript"></script>

    <link href="../../common/samples.css?v=7.0.1" rel="stylesheet" type="text/css">
    <style type="text/css">html, body {
        height: 100%
    }</style>
</head>
<body>
<input onclick='showPopup()' type='button' value='Show grid'>
<input onclick='showPopup2()' type='button' value='Show form'>
<br>
<input onclick='store.add({ title : "new text" });' type='button' value='Add new row'>
<br>
<input onclick='store.setCursor(1);' type='button' value='Fill form with data 1'>
<input onclick='store.setCursor(2);' type='button' value='Fill form with data 2'>
<div id='testA'></div>
<div id='testB'></div>

<script charset="utf-8" type="text/javascript">

    function showPopup() {
        var popup = webix.ui({
            view: "window", position: "center", move: true,
            head: {template: "win", type: "header"},
            body: {
                rows: [{
                    view: "datatable", editable: true,
                    columns: [
                        {id: "rank", header: "", css: "rank", editor: "text", width: 50},
                        {id: "title", header: "Film title", editor: "text", width: 200},
                        {id: "year", header: "Released", editor: "text", width: 80},
                        {id: "votes", header: "Votes", editor: "text", width: 100}
                    ],
                    autoheight: true,
                    autowidth: true,
                    select: "row"
                },
                    {
                        view: "button", value: "close", click: function () {
                            this.getTopParentView().close();
                        }
                    }]
            }
        });

        popup.getBody().getChildViews()[0].sync(store);
        popup.show();
    }

    function showPopup2() {

        var popup = webix.ui({
            view: "window", position: "center", move: true,
            head: {template: "win", type: "header"},
            body: {
                rows: [{
                    view: "form",
                    elements: [
                        {view: "text", name: "title", label: "Title"},
                        {view: "textarea", name: "year", label: "Year"},
                        {view: "textarea", name: "votes", label: "Votes"},

                        {
                            view: "button", value: "Save", click: function () {
                                this.getFormView().save()
                            }
                        }
                    ]
                },
                    {
                        view: "button", value: "close", click: function () {
                            this.getTopParentView().close();
                        }
                    }]
            }
        });

        popup.getBody().getChildViews()[0].bind(store);
        popup.show();
    }

    webix.ready(function () {
        store = new webix.DataCollection({
            url: "/samples/server/films",
            save: "rest->/samples/server/films",
            ready: function () {
                this.setCursor(this.data.getFirstId());
            }
        });
    });
</script>
</body>
</html>